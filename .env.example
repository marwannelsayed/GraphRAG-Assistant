# ===========================================
# Agentic HybridRAG Knowledge Engine - Environment Configuration
# ===========================================
# Copy this file to .env and fill in your actual values
# Documentation: README.md

# ===========================================
# Ollama Configuration (Local LLM - REQUIRED)
# ===========================================
OLLAMA_BASE_URL=http://host.docker.internal:11434
# For Linux: http://localhost:11434
# For Docker Desktop (Mac/Windows): http://host.docker.internal:11434

OLLAMA_MODEL=phi3:mini
# Recommended: phi3:mini (3.8GB, best for RAG)
# Alternatives: llama3.2, mistral, qwen2.5
# Install: ollama pull phi3:mini

# ===========================================
# OpenAI Configuration (Optional - for embeddings only)
# ===========================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini
# Only needed for embeddings - Ollama handles all LLM generation

# ===========================================
# Neo4j Configuration (Knowledge Graph)
# ===========================================
NEO4J_URI=bolt://neo4j:7687
# Local dev: bolt://localhost:7687
# Docker: bolt://neo4j:7687
# Cloud: neo4j+s://your-instance.databases.neo4j.io

NEO4J_USER=neo4j
NEO4J_PASSWORD=your-secure-password-here
# ⚠️  CRITICAL: Change default password in production!

# ===========================================
# ChromaDB Configuration (Vector Store)
# ===========================================
CHROMA_PERSIST_DIR=./chroma_db
CHROMA_DEFAULT_COLLECTION=documents
CHROMA_EMBEDDING_BACKEND=openai
# Options: openai (recommended), sentence-transformers (coming soon)

# ===========================================
# Extraction Configuration (Two-Phase Pipeline)
# ===========================================
USE_LLM_ENTITY_EXTRACTION=true
# true = Ollama phi3:mini (slower, 95% accuracy, better for research papers)
# false = spaCy NER (faster, 70% accuracy, good for general text)

MAX_RELATION_CHUNKS=5
# Limit relation extraction to first N chunks (performance optimization)
# Trade-off: More chunks = more relations but slower processing
# Recommended: 5 for documents <10 pages, 10 for longer documents

# ===========================================
# Application Configuration
# ===========================================
LOG_LEVEL=INFO
# Options: DEBUG (verbose), INFO (normal), WARNING, ERROR, CRITICAL

ENVIRONMENT=development
# Options: development, staging, production

# CORS Configuration (Frontend URLs)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
# Add your frontend URLs separated by commas

# Upload Limits
MAX_UPLOAD_SIZE=10485760  # 10MB in bytes
ALLOWED_EXTENSIONS=pdf,txt,md  # Comma-separated file types

# ===========================================
# Docker Configuration
# ===========================================
COMPOSE_PROJECT_NAME=hybridrag

# Port Mappings
BACKEND_PORT=8000
FRONTEND_PORT=3000
NEO4J_BOLT_PORT=7687
NEO4J_HTTP_PORT=7474

# ===========================================
# Advanced Configuration (Optional)
# ===========================================

# Agentic Retrieval
# ENABLE_REFLECTION_AGENT=true  # Auto-retry failed retrievals
# MAX_REFLECTION_ITERATIONS=2   # How many times to retry

# Performance Tuning
# EMBEDDING_BATCH_SIZE=32
# CHUNK_SIZE=500
# CHUNK_OVERLAP=50

# Rate Limiting
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_PER_MINUTE=60

# ===========================================
# External Services (Optional - Future)
# ===========================================

# Redis (for caching)
# REDIS_URL=redis://localhost:6379/0

# Sentry (for error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# AWS S3 (for document storage)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_S3_BUCKET=your-bucket-name
# AWS_REGION=us-east-1

# ===========================================
# Development & Testing
# ===========================================

# Debug Features
# ENABLE_QUERY_LOGGING=true
# ENABLE_PERFORMANCE_METRICS=true
# ENABLE_DEBUG_ENDPOINTS=false  # ⚠️  Never enable in production

# Testing
# TEST_MODE=false
# MOCK_LLM_RESPONSES=false

# ===========================================
# Security (Production)
# ===========================================

# JWT/Auth (if implementing authentication)
# JWT_SECRET=your-super-secret-key-here
# JWT_ALGORITHM=HS256
# ACCESS_TOKEN_EXPIRE_MINUTES=30

# API Keys (if exposing public API)
# API_KEY_REQUIRED=true
# VALID_API_KEYS=key1,key2,key3
